<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.433">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Andrew Castillo, Ania Grudzien, Kayla McComb">

<title>Final_project</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="Final_project_files/libs/clipboard/clipboard.min.js"></script>
<script src="Final_project_files/libs/quarto-html/quarto.js"></script>
<script src="Final_project_files/libs/quarto-html/popper.min.js"></script>
<script src="Final_project_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="Final_project_files/libs/quarto-html/anchor.min.js"></script>
<link href="Final_project_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="Final_project_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="Final_project_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="Final_project_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="Final_project_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Final_project</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Andrew Castillo, Ania Grudzien, Kayla McComb </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<section id="final-project" class="level2">
<h2 class="anchored" data-anchor-id="final-project">Final Project</h2>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<p>Our final project will use a large-scale cross-sectional dataset with psychological variables. This data will be simulated to emulate the real dataset (sourced from www.sapa-project.org, my advisor’s data collection platform). The dimensions will be 105 columns and ~10,000 rows, where each row represents a participant’s responses to a survey of 100 items and the content of the item, along with the respondent’s age, gender identity, race, and geographic location. Values will be numerical, ranging from 1 to 6 for the 100 items. The demographic variables will be strings, except for age, which will also be in numeric format. Four latent factors will be built into the data in order to make a factor analysis viable; the items are based on a scale measuring maladaptive imagination, and the factors are 1) Anxiety 2) Hopelessness 3) Resentment and 4) Shame.</p>
</section>
<section id="preparatory-work" class="level1">
<h1>Preparatory Work</h1>
<p>To prepare our data for analysis, we will need to simulate it. This will be achieved using rnorm() and round(). The four factors will be simulated separately in “blocks” of 25 items each and merged together. These blocks will have different, randomly selected means and standard deviations in order to allow the factor analysis to locate the desired clusters of items from each of the factors. A spattering of NAs will also be introduced using something like this: sample(1:n, 0.15<em>nrow(data)</em>ncol(data), replace = T) paired with a for loop. This will introduce some amount of missingness (in this case, 15%) to make the data more realistic and add a bit of intrigue and decision making around handling the missing data. After this, the data will be ready for analysis including imputation, removal of missing data, partitioning into holdouts, and more. In this stage, we will use mutate() and other tidyverse() functions per the project requirements.</p>
</section>
<section id="meeting-project-requirements" class="level1">
<h1>Meeting Project Requirements</h1>
<p>This dataset is “real world” in the psychometrics sub-discipline of psychology, which is concerned with measurement of psychological traits. The fact that it is simulated means it will be able to be posted publicly on GitHub. We will be able to produce a miniature manuscript detailing the scale development process, which may provide our group with a reference as we continue to develop best practices for reproducible science. This data will provide us with a wealth of opportunities, such as but not limited to, factor analysis, imputation (or not), cross-validation on holdout data, and data visualizations charting factor structures and item loadings.</p>
<section id="simulating-the-data" class="level2">
<h2 class="anchored" data-anchor-id="simulating-the-data">Simulating the data</h2>
<p>Data is simulated using a random sampling procedure. Four latent factors consisting of items rated 1 - 6 are produced using the sample() function and stored into a dataframe.</p>
</section>
<section id="properties-of-the-data" class="level2">
<h2 class="anchored" data-anchor-id="properties-of-the-data">Properties of the data</h2>
<p>Below are basic descriptives of the data, including pairwise administrations, means, standard deviations, and the like.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>   vars    n    mean    sd median trimmed   mad  min  max range skew kurtosis
X1    1 4950 7224.92 12.74   7225 7224.87 13.34 7183 7274    91 0.04    -0.09
     se
X1 0.18</code></pre>
</div>
</div>
</section>
<section id="tidying-the-data" class="level2">
<h2 class="anchored" data-anchor-id="tidying-the-data">Tidying the data</h2>
<p>Cleaning the data involves the handling of missing values. 15% of the data is missing and there are no complete rows. In order to address this missingness, imptuation is used with the makeX() function from the glmnet() package.</p>
</section>
<section id="visualizing-the-data" class="level2">
<h2 class="anchored" data-anchor-id="visualizing-the-data">Visualizing the data</h2>
<p>The data is visualized in mutliple ways, including a correlation table, heatmap, and other plots.</p>
<div class="cell">
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              item_1       item_2       item_3       item_4       item_5
item_1   1.000000000 -0.008050056 -0.011333592  0.009592578 -0.011190914
item_2  -0.008050056  1.000000000  0.008618004  0.003079410  0.003715811
item_3  -0.011333592  0.008618004  1.000000000  0.002635139 -0.010906044
item_4   0.009592578  0.003079410  0.002635139  1.000000000 -0.003181487
item_5  -0.011190914  0.003715811 -0.010906044 -0.003181487  1.000000000
item_6  -0.006859116  0.010779430 -0.008328796  0.011453777 -0.005490556
item_7  -0.004956589  0.014057200 -0.007846620  0.017897398 -0.002821324
item_8  -0.004204708  0.004621634  0.006851235 -0.027359464 -0.015050215
item_9  -0.012344701  0.002285383 -0.016774124  0.005898325  0.014829832
item_10  0.013015243 -0.006969842  0.013634808 -0.003679456  0.007626910</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              item_1       item_2       item_3       item_4       item_5
item_1   1.000000000 -0.008050056 -0.011333592  0.009592578 -0.011190914
item_2  -0.008050056  1.000000000  0.008618004  0.003079410  0.003715811
item_3  -0.011333592  0.008618004  1.000000000  0.002635139 -0.010906044
item_4   0.009592578  0.003079410  0.002635139  1.000000000 -0.003181487
item_5  -0.011190914  0.003715811 -0.010906044 -0.003181487  1.000000000
item_6  -0.006859116  0.010779430 -0.008328796  0.011453777 -0.005490556
item_7  -0.004956589  0.014057200 -0.007846620  0.017897398 -0.002821324
item_8  -0.004204708  0.004621634  0.006851235 -0.027359464 -0.015050215
item_9  -0.012344701  0.002285383 -0.016774124  0.005898325  0.014829832
item_10  0.013015243 -0.006969842  0.013634808 -0.003679456  0.007626910</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              item_1       item_2       item_3       item_4       item_5
item_1   1.000000000 -0.008050056 -0.011333592  0.009592578 -0.011190914
item_2  -0.008050056  1.000000000  0.008618004  0.003079410  0.003715811
item_3  -0.011333592  0.008618004  1.000000000  0.002635139 -0.010906044
item_4   0.009592578  0.003079410  0.002635139  1.000000000 -0.003181487
item_5  -0.011190914  0.003715811 -0.010906044 -0.003181487  1.000000000
item_6  -0.006859116  0.010779430 -0.008328796  0.011453777 -0.005490556
item_7  -0.004956589  0.014057200 -0.007846620  0.017897398 -0.002821324
item_8  -0.004204708  0.004621634  0.006851235 -0.027359464 -0.015050215
item_9  -0.012344701  0.002285383 -0.016774124  0.005898325  0.014829832
item_10  0.013015243 -0.006969842  0.013634808 -0.003679456  0.007626910</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-5-5.png" class="img-fluid" width="672"></p>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>              item_1       item_2       item_3       item_4       item_5
item_1   1.000000000 -0.008050056 -0.011333592  0.009592578 -0.011190914
item_2  -0.008050056  1.000000000  0.008618004  0.003079410  0.003715811
item_3  -0.011333592  0.008618004  1.000000000  0.002635139 -0.010906044
item_4   0.009592578  0.003079410  0.002635139  1.000000000 -0.003181487
item_5  -0.011190914  0.003715811 -0.010906044 -0.003181487  1.000000000
item_6  -0.006859116  0.010779430 -0.008328796  0.011453777 -0.005490556
item_7  -0.004956589  0.014057200 -0.007846620  0.017897398 -0.002821324
item_8  -0.004204708  0.004621634  0.006851235 -0.027359464 -0.015050215
item_9  -0.012344701  0.002285383 -0.016774124  0.005898325  0.014829832
item_10  0.013015243 -0.006969842  0.013634808 -0.003679456  0.007626910</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-5-6.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>  mean(age)
1  31.62916</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>  mean(age)
1  31.64116</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Removed 1 rows containing missing values (`position_stack()`).</code></pre>
</div>
<div class="cell-output-display">
<p><img src="Final_project_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="manuscript-text" class="level2">
<h2 class="anchored" data-anchor-id="manuscript-text">Manuscript Text</h2>
<p>Imagination is a fundamental human ability which permeates our daily experiences, influencing everything from the mundane to the grand narratives of myths and legends. Central to creativity, problem-solving, and foresight, imagination shapes our perceptions of reality and the cognitive schemas we use to interpret the world around us (Gotlieb et al., 2019). As a multifaceted construct, imagination involves varying levels of mental imagery, social cognition, mental simulation, emotion, and temporal exploration (Abraham, 2016), using combinations of existing memory to create an experience distinct from external sensory stimuli. Though widely recognized as a positively valanced construct, imagination plays a complex role in mental health and personality. The tendency to frequently and intensely envision negative future scenarios is a feature of clinical depression (Gotlib &amp; Joormann, 2010; Zetsche et al., 2019) and anxiety (Wu et al., 2015), while difficulty in distinguishing imagination from reality plays a role in thought disorders such as schizophrenia (Rasmussen et al., 2022; Jardri &amp; Thomas, 2013). The intersection of imagination with psychopathology, as explored by Kaufman (2014) and Holmes &amp; Mathews (2010), highlights the challenges associated with measuring such a complex construct and evaluating its impacts on mental health.</p>
</section>
</section>
<section id="the-imaginative-process" class="level1">
<h1>The Imaginative Process</h1>
<p>Imagination is a cognitive function that encompasses various processes and is integral to human psychological functioning across a range of contexts. Abraham (2016) identifies five core categories that define imagination: perceptual/motor-related mental imagery, intentionality or recollective processing, novel combinatorial or generative processing, aesthetic phenomenology, and altered psychological states. This is extended by Crespi (2020), who asserts there are seven major components of imagination: pretend play, creativity, narratives and aesthetics, mental time travel, salience, mental imagery and sensory systems, and a neural system enabling imagination. These categories, grounded in both philosophical theory and empirical neuroscience evidence, highlight imagination’s virtually limitless capacity and varied manifestations. Each category has a distinct neural basis and operates through separate cognitive systems, contributing to the multifaceted nature of imaginative cognition. Common processes, such as mental simulation (Markman et al., 2012), mental time travel (Suddendorf, 1997), and perspective-taking (Batson, 2009), involve dynamic interplay between these categories. This interplay allows individuals to transcend the immediate present with novel thoughts about possible, past, and future scenarios.</p>
<p>Mullally &amp; Maguire (2014) emphasize that memory forms the foundation for such imaginative projections, enabling the construction of future scenarios based on past experiences. This predictive aspect of imagination (“foresight”) is crucial for adaptive functioning, often aligned with personal and social objectives through cognitive control mechanisms <span class="citation" data-cites="Sass:01d">Sass and Schuldberg (<a href="#ref-Sass:01d" role="doc-biblioref">2011</a>)</span>. While the neuroscientific understanding of some aspects of imagination, such as imagery, is well-developed, others like altered states remain less explored. One key area in this ongoing exploration is the Default Mode Network (DMN; Buckner et al., 2008), which Andrews-Hanna &amp; Grilli (2021) have linked to various imaginative processes. Continual research into the facets of imagination is poised to uncover new insights and relationships, as underscored by the works of Abraham (2016) and Sassenberg et al.&nbsp;(2023). However, it’s crucial to recognize that dysfunction in imagination, such as excessive daydreaming (Somer, 2002) or problematic psychological states (Abraham, 2016) can be maladaptive. This underscores the importance of imagination as both a cognitive function and an enduring source of individual differences across the lifespan.</p>
<p>The evolution in psychometric research towards multifactor, dimensional models reflects a significant shift in how imagination is measured. Historically, tools like the Torrance Tests of Creative Thinking (TCTT; Torrance, 1974) and Gough’s (1979) Creative Personality Scale approached assessing imagination as a component of creativity. However, recent advancements have led to direct measures of imagination as a standalone construct. Notable advancements include the Imaginal Processes Inventory (IPI; Singer &amp; Antrobus, 1963; Singer &amp; Antrobus, 1966), a cross-cultural measure by Feng et al.&nbsp;(2017), and dimensional scales such as the Four-Factor Imagination Scale (FFIS; Zabelina &amp; Condon, 2020) and the Dual-Factor Imagination Scale (DFIS; Sassenberg et al., 2023). The FFIS, in particular, offers a comprehensive evaluation of imagination, assessing the of dimensions Frequency (duration of time spent in imagination), Complexity (elaboration of imaginative activity), Emotional Valence (the emotional content of imagination), and Directedness (the extent to which imagination is goal-oriented). This approach aligns with contemporary frameworks of imagination and is powerful in exploring the range of imagination’s features, from its adaptive components to its potential role in adverse psychological outcomes.</p>
<p>With the multi-faceted nature of imagination and its potential intersection with maladaptive traits, it’s important to understand its psychometric structure.</p>
<p>The Current Study</p>
<p>This study aims to explore the factor structure of imagination using a pool of 100 items administered to 10,000 participants.</p>

</section>

<div id="quarto-appendix" class="default"><section class="quarto-appendix-contents" role="doc-bibliography"><h2 class="anchored quarto-appendix-heading">References</h2><div id="refs" class="references csl-bib-body hanging-indent" role="list">
<div id="ref-Sass:01d" class="csl-entry" role="listitem">
Sass, Louis A, and David Schuldberg. 2011. <span>“Introduction to the Special Issue: Creativity and the Schizophrenic Spectrum.”</span> <em>Creativity Research Journal</em> 13 (1): 1–4.
</div>
</div></section></div></main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>